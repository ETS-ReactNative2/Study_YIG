### CentOS

#### 리눅스 설치 후 설치 할 패키지

1. CentOS는 넷인스톨 방식으로 설치. 

   ```bash
   http://www.microsoft.com/download/en/details.aspx?id=26837
   http://www.microsoft.com/downloads/ko-kr/details.aspx?FamilyID=c1256a7f-8a2d-4b18-851c-63b22ca976d3
   ```

   

2. 네트워크 셋팅

   ```bash
   a. /etc/sysconfig/network-scripts/ifcfg-eth0 - 파일에가서 MAC수정
   b. service NetworkManager stop
   c. chkconfig NetworkManager off
   d. service network restart
   e. reboot or ifconfig eth0 (요거하면 IP가 정상적으로 나와서 원격접속을 이용 가능)
   
   // /etc/resolv.conf 파일을 vi편집기로 접근
   search com	
   nameserver 8.8.8.8	
   nameserver 168.126.63.1	
   nameserver 164.124.101.2
   ```

   

3. yum 패키지

   Yellowdog Updater Modified 의 약자로서 rpm 기반 업데이트 도구

   ![yum 도움말](C:\Users\sau-5\Desktop\YIG\System\20.01.02\yum 도움말.PNG)

   ```bash
   # yum help | more
   # yum -y upgrade
   # yum -y install wget
   //wget으로 자바, 톰캣 등을 다운 받고 설치
   # wget http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-linux-x64.rpm
   
   # rpm -ivh jdk-7-linux-x64.rpm
   
   # wget http://mirror.khlug.org/apache/tomcat/tomcat-7/v7.0.20/bin/apache-tomcat-7.0.20.tar.gz
   
   # tar -xvf apache-tomcat-7.0.20.tar.gz
   
   # service tomcat7 start
   
   //setup
   # yum install -y setuptool
   
   //ntsysv
   # yum install -y ntsysv
   
   //system-config-network
   # yum install -y system-config-network system-config-network-tui
   
   # yum -y install ipvsadm
   # yum -y install mc
   
   # yum install -y openssh*
   # yum install -y libaio
   
   //방화벽 끄고 톰캣 동작하는지 확인 후 다시 켜기
   # service iptables stop
   ```

   

4. 설정

   ```bash
   //컴퓨터 이름 변경
   # vi etc/sysconfig/network
   
   //VIP상태보기
   #  watch 'ipvsadm -Ln --sort' --interval=3
   ```




#### 리눅스 설치 후 설정

1. 서버시간 동기화

   ```bash
   # yum install rdate
   //리눅스 서버와 보라넷 서버의 시간을 동기화
   # rdate -s time.bora.net
   # date
   ```

   

2. cron을 이용한 서버시간 동기화

   ```bash
   //매일 혹은 주기적인 작업을 지정된 시간에 반복적으로 수행할 수 있도록
   # crontab -e
   ```

   

3. 자동 로그아웃

   ```bash
   // /etc/profile은 사용자가 로그인 시 참조하는 파일
   # vi /etc/profile
   
   //300초 동안 응답이 없으면 로그아웃
   # security config
   	export TMOUT=300
   	
   //수정한 내용을 반영
   # source /etc/profile
   
   //echo 명령어를 통해 환경변수가 잘 설정 되었는지 확인
   # echo $TMOUT
   ```

   

4. 히스토리 포맷 설정

   ```bash
   # history
   
   //명령어의 단순 목록만 출력하는데 여기에 시간을 추가하여 포맷팅
   # vi /etc/profile
   HISTTIMEFORMAT="%Y-%m-%d_%H:%M:%S [CMD]:"
   
   # source /etc/profile
   # history
   ```

   

5. 원격 터미널 설정 및 root 접근 불가 설정

   - 원격으로 접속하기 위한 도구들(putty, Xshell 등)을 사용하기 위해 SSH 서버 설정

   ```bash
   //SSH 서버 설정
   
   //SSH 서버가 실행되고 있는지 확인
   # ps -ef | grep sshd
   
   //SSH 서비스 자동 실행 상태로 변경하는 명령어. 즉 서버가 sshd 서비스가 자동으로 실행
   # systemctl enable sshd.service
   ```

   - SSH서버를 root로 접근 못하게 설정

   ```bash
   //	/etc/sshh/sshd_config파일을 열고 Root를 검색 (명령모드에서 /Root를 입력 후 엔터를 치면 vi 편집기 검색 가능)
   # vi /etc/ssh/sshd_config
   	PermitRootLogin no
   
   //설정 적용하기 위해 sshd 서비스 재시작
   # systemctl restart sshd.service
   ```

   

6. alias 설정

   ```bash
   //로그인 시 실행되는 스크립트 파일 중에 alias관련 설정은 /etc/bashrc 파일에 작성
   
   # vi /etc/bashrc
   alias cp='cp -i'
   alias mv='mv -i'
   
   //이제 cp 또는 mv명령어를 입력하면 자동으로 -i 옵션이 추가되어, 이미 같은 기음의 파일이 존재할 경우 덮어 쓸 것인지를 확인하는 메세지가 출력
   ```

   

7. 고정 IP 설정

   1. IP Address
   2. Subnet Mask
   3. Gateway IP Address
   4. DNS Server IP Address

   ```bash
   //ip 주소 확인
   # yum install net-tools
   # ifconfig
   
   //고정 ip 설정
   # vi /etc/sysconfig/network-scripts/ifcfg-enp0s3
   BOOTPROTO="static"
   IPADDR=192.168.0.107
   NETMASK=255.255.255.0
   GATEWAY=192.168.0.1
   DNS=
   
   //기존의 작성 내용은 주석처리하고 수정
   BOOTPROTO의 값은 고정 아이피를 작성할 것이므로 static으로 서정. (dhcp는 동적 IP할당을 의미)
   ```

   

8. SSH 서버 보안 -fail2ban

   SSH접근을 통해 root 비밀번호 해킹 시도 빈번하므로 fail2ban을 사용. fail2ban은 설정한 시간 내에 지정된 횟수 이상으로 SSH로그인을 실패하면, 해당 IP의 접근을 지정된 시칸만큼 차단하는 역할

   ```bash
   # yum install -y fail2ban
   # systemctl start fail2ban
   # systemctl enable fail2ban
   # systemctl status fail2ban
   ```

   

9. 방화벽 및 SELinux

   방화벽 정지

   ```bash
   # systemctl stop firewalld.service
   # systemctl disable firewall.service
   
   //확인
    iptables -nL
   ```

   SELinux 정지

   ```bash
   # vi /etc/selinux/config
   SELINUX=disabled
   
   //확인
   # sestatus
   ```



#### 사용자 추가





### Reference

[리눅스 설정] : https://victorydntmd.tistory.com/212?category=704005

