### CDROM mount & Apache package 설치

<목차>

1. [linux에서 cdrom 마운트 방법](linux에서-cdrom-마운트-방법)
   1. Detecting
   2. Creating
   3. Mount
   4. Allowing
2. [/mnt/cdrom/Package에서 Package 설치 방법](#/mnt/cdrom/package에서-package-설치-방법)
   1. 설치
   2. rpm 정의
      1. 패키지 설명
      2. 시스템 아키텍쳐
      3. 범용vs전용
   3. RPM 옵션
   4. 소스컴파일 vs 바이너리
   5. 의존성  필요한 패키지 기본 모드
   6. 해당 패키지 설치
3. [Apache 웹 서버 (httpd) 의존성 패키지 설명](#apache-웹-서버-(httpd)-의존성-패키지-설명)
   1. httpd
   2. httpd-devel
   3. apr-util-devel
   4. expat-devel
   5. expat
   6. openldap-devel
   7. cyrus-sasl-devel
4. [yum 과 apt-get](#yum-과-apt-get)
   1. 인터넷 연결
   2. DNS 확인
   3. yum 패키지 설치



#### 1. How to mount cdrom in Linux

1. Detecting CD/DVD-ROM dreives (CD/DVD 드라이브 감지)

   ```bash
   //ISO9660 data를 읽어야 함
   # wodim --devices
   
   //wodim 명령어 안되면
   해당 패키지 설치
   
   //Debian and Ubuntu
   # apt-get install wodim
   //OR
   # apt-get install cdrecord
   
   //RedHat, Fedora, CentOS
   # yum install cdrecord
   
   //다시 wodim 명령어 실행
   #  wodim --devices
   wodim: Overview of accessible drives (1 found) :
   ----------------------------
    0  dev='/dev/scd0'     rwrw-- : 'TSSTcorp' 'CD/DVDW SH-S183L'
   ----------------------------
   
   /// dev / scd0에서 액세스 될 수 있음을 확인
   //Debian Linux에서는 wodim 명령을 실행하는 사용자는 cdrom 그룹에 속해야함. 아니면 드라이버 열 수 없다는 오류 남.
   ```

   

2. Creating mount point (마운트 포인트 생성), mount 지점은 CD 또는 DVD에 있는 데이터에 사용자가 액세스 할 수 있는 장소를 나타냄.

   ```bash
   # mkdir /media /cdrom
   
   # cd /dev/sr0
   or cd /dev/cdrom
   ```

   

3. Mount CDROM

   ``` bash
   //cdrom 그럽에 속하지 않아 CDROM 마운트 권한을 보유하지 않은 경우 루트 사용자로 전환하고 아래 명령을 실행
   # mount -t iso9660 /dev/scd0 /media/cdrom
   mount: block device /dev/sr0 is write-protected, mounting read-only
   
   //이제 cd-rom이 /media/cdrom 디렉토리에서 마운트 되어 엑세스 할 수 잇습니다.
   ```

   

4. Allowing users to mount CDROM (사용자가 CDROM을 마운트 할 수 있도록 허용하기 (ISO이미지 파일을 cd에 넣기))

   ```bash
   # cd /mnt
   
   # mkdir cdrom
   
   //mount (보통 read-only)
   # mount /dev/cdrom /mnt/cdrom
   ```
   
   

5. mount 확인

   ```bash
   [root@localhost cdrom]# cd /dev
   [root@localhost dev]# ls -l sr0
   brw-rw----. 1 root cdrom 11, 0 Jan  7 19:34 sr0
   ```
   

   
6. Umount and eject CDROM (마운트 해제)

   ```bash
   # umount /dev/hdc
   # eject
   ```

   

#### 2. `/mnt/cdrom/Package`에서 Package 설치 방법

1. 설치

   ```bash
   # ls -l vsftpd-2.2.2-21.el6.x86_64.rpmls -l vsftpd-2.2.2-21.el6.x86_64.rpm
   ```

   

2. rpm 정의 및 특징

   1. RPM 정의

      Redhat Package Manager

   2. `.deb`는 debian, ubuntu 계열에서 사용하는 패키지로 바이너리 파일로 구성되어 컴파일이 필요 없고 패키지의 파일들이 관련 디렉토리로 바로 설치된다.

   3. 패키지 설명

   ```bash
   httpd-2.2.15-53.el6.centos.x86_64
   
   1.패키지이름(httpd)-2.버전(2.2.15)-3.릴리즈(53.el6)-4.시스템 아키텍쳐(x86_64)-5.확장자
   
   2. 버전 : 메이저 버전.마이너버전.패치버전
   
   3. 릴리즈 : el 6은 Redhat 6버전
   4. 시스템 아키텍처
   x86은 인텔 x86 CPU를 의미하고
   64는 64비트 운영체제임을 의미
   ```

   4. 패키지 중 시스템 아키텍처

      아키텍쳐는 프로그램이 수행되는 플랫폼을 의미. i386(x86)은 인텔 386계열의 프로세서를 가진 플랫폼에서 컴파일 되었다는 의미.
      인텔이나 그 호환 칩셋을 꽂은 PC에서는 기본적으로 i386(x86)이나 noarch라는 아키텍쳐 이름이 포함된 패키지만 쓸 수가 있다. 위의 i386은 80386, 486, 586등의 인텔 계열의 프로세서를 통칭하며, i386외에 alpha, m68k(모토로라 68000), ppc(파워PC), sparc(sun), noarch등의 아키텍쳐들이 있다.

   5. 범용 vs 전용 서버

      - 범용서버 : linux, window, unix 다 사용 가능하므로 범용 서버라하며 x86 서버. x86은 intel이 만듬

      - 전용서버 : 전용서버의 경우 전용 OS만 설치 가능.
        hp_UX ,IBM_AIX, oracle_solaris (범용/전용) 등이 있다.

      - 전용서버의 특징: Linux없고 Unix만 존재. 안정적이므로 패치 버전이 높다.
        WAS서버나 스토리지서버로는 전용서버가 유리하다.

      - noarch : no-archetecture의 줄임말로 unix, linux, 범용, 전용 상관없이 전부 지원

        ```bash
        //아래 명령어로 noarch 패키지 검색 가능
        # rpm -qa | grep noarch
        or
        # ls -l *noarch*
        ```

        

3. rpm 옵션

   ```bash
   -i : install
   -U : upgrade, install
   -v : detail information(verbose)
   -h : print hash marks : 설치 진행 상황을 `#` 문자로 표현
   -q[질문옵션] 
   
   # rpm -Uvh
   or
   # rpm -ivh 패키지명
   ```

   [Linux ETC (RPM 관련 옵션)]: http://faq.hostway.co.kr/Linux_ETC/1611

   

4. 소스컴파일 vs 바이너리 설치 

   ```bash
   //소스 컴파일과 바이너리 설치 중 선호 방법 참고 https://kldp.org/node/65659
   요약: 사용 목적에 따라 달라지며 퍼포먼스를 올리기 위해 소스 컴파일(머신에 최적화 하므로)을 사용하지만 수십대나 되는 실무환경에서는 컴파일은 비생산적. 또한, 컴파일 설치는 유지보수가 어려움. 
   
   //패키지 관리가 쉬운 gento linux 참고 (emerge sync, emerge -uva world, etc-update)
   요약: 고사양 하드웨어 '서버'에서 바이너리 vs 소스컴파일 논쟁은 그냥 젠투가 좋음 (/etc 파일 둘러보기)
   ```

   [gentoo linux]: https://wiki.gentoo.org/wiki/Virtual_mail_hosting_with_qmail	"gentoo linux 공식 사이트"

   

5. 의존성 필요한 패키지 설치 방법

   ```bash
   1. rpm install 
   wget [RPM Packaage 다운로드 url] 명령어를 사용하여 RPM Package 파일 다운로드
   # wget http://rpms.remirepo.net/enterprise/remi-release-7.rpm
   
   2. rpm -ivh [RPM Package] 명령어 사용
   libaprutil-1.so.0()(64bit) is needed by httpd-tools-2.2.15-53.el6.centos.x86_64
   # rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/apr-1.3.9-5.el6_9.1.x86_64.rpm
   
   libapr-1.so.0()(64bit) is needed by httpd-tools-2.2.15-53.el6.centos.x86_64
   #  rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/apr-util-1.3.9-3.el6_0.1.x86_64.rpm
    
   3. 설치 패키지 확인 
   rpm -qa|grep[RPM Package]
   # rpm -qa | grep httpd
   
   4. 설치 패키지 상세 확인
   rpm -qi [RPM Package]
   # rpm -qi httpd
   //설치 전 패키지 내용 확인
   # rpm -qpi httpd
   
   5. 특정 파일이 속한 패키지 알기
   rpm -qf `which [package]`
   # rpm -qf `which httpd`
   // -d 옵션 추가 시 해당패키지 포험된 문서의 설치 경로 확인 가능
   # rpm -qdf `which [package]`
   
   6. 설치 경로 보기
   # rpm -ql httpd
   // -p 옵션 뒤에 패키지명을 추가 시 설치 될 전체 경로도 알 수 있다.
   # rpm -qpl [package]  
   
   7. 패키지의 의존성 목록 보기 (-R or --requires 옵션)
   # rpm -qR mod_ssl
   
   8. 패키지 삭제
   rpm -ev [RPM Package명(까지만)]
   ```

   [CentOS 패키지 사이트]: https://pkgs.org/download/libapr-1.so.0()(64bit)	"source 설치"

   [패키지 설치 관련 옵션 모음 사이트]: https://www.lesstif.com/pages/viewpage.action?pageId=7635004

   

6. 해당 패키지 설치

   ```bash
   [root@localhost Packages]# rpm -Uvh vsftpd-2.2.2-21.el6.x86_64.rpm
   
   //의존성 문제 해결하고 나머지 패키지 설치
   [root@localhost Packages]# rpm -Uvh httpd - 
   
   //아래 4개 패키지 설치
   # rpm -Uvh httpd-2.2.15-53.el6.centos.x86_64.rpm
   //의존성 패키지 설치 3 으로
   
   # rpm -Uvh httpd-tools-2.2.15-53.el6.centos.x86_64.rpm
   
   # rpm -Uvh httpd-manual-2.2.15-53.el6.centos.noarch.rpm
   
   # rpm -Uvh httpd-devel-2.2.15-53.el6.centos.x86_64.rpm
   //의존성 패키지 설치 2 로
   ```

   

7. 의존성 패키지 설치 2

   ```bash
   // httpd-devel 설치에 필요한 의존성 패키지들
   
   //apr-devel is needed by httpd-devel-2.2.15-53.el6.centos.x86_64
   # rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/apr-devel-1.3.9-5.el6_9.1.x86_64.rpm
   
   //apr-util-devel is needed by httpd-devel-2.2.15-53.el6.centos.x86_64
   # rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/apr-util-devel-1.3.9-3.el6_0.1.x86_64.rpm
   // 의존성 필요 패키지 2-1로
   
   //httpd = 2.2.15-53.el6.centos is needed by httpd-devel-2.2.15-53.el6.centos.x86_64
   # rpm -ivh http://mirror.centos.org/centos/6/os/i386/Packages/httpd-devel-2.2.15-69.el6.centos.i686.rpm
   ```

   

8. 의존성 패키지 2-1

   ```bash
   //expat-devel is needed by apr-util-devel-1.3.9-3.el6_0.1.x86_64
   # rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/expat-devel-2.0.1-13.el6_8.x86_64.rpm
   
   //openldap-devel is needed by apr-util-devel-1.3.9-3.el6_0.1.x86_64
   # rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/openldap-devel-2.4.40-16.el6.x86_64.rpm
   //의존성 필요 패키지 2-2로
   ```

   

9. 의존성 패키지 2-2

   ```bash
   //cyrus-sasl-devel >= 2.1 is needed by openldap-devel-2.4.40-16.el6.x86_64
   
   # rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/cyrus-sasl-devel-2.1.23-15.el6_6.2.x86_64.rpm
   ```

   

10. 의존성 패키지 3

    ```bash
    //apr-util-ldap is needed by httpd-2.2.15-53.el6.centos.x86_64
    
    # rpm -ivh http://mirror.centos.org/centos/6/os/x86_64/Packages/apr-util-ldap-1.3.9-3.el6_0.1.x86_64.rpm
    ```

    

11. 설치 패키지 확인

    ```bash
    # rpm -qa | grep httpd
    // httpd, httpd-tools, httpd-manual, httpd-devel 4개 패키지 설치 완료
    
    # rpm -qi httpd
    //-i : info
    
    //httpd 설치 확인
    # service httpd start
    //웹 브라우저 url 창에
    해당 ip 입력 후 Apache2 Test Page 뜨는지 확인
    ```

    

12. httpd 관련 의존성 정리

    ```bash
    1. httpd
    	1.1 httpd-manual
    	1.2 httpd-devel
    	1.3 httpd-tools
    	1.4 apr-util-ldap
    	
    2. httpd-manual
    	2.1 
    	
    3. httpd-devel
    	3.1 apr-util-devel
    		3.1.1 expat-devel
    		3.1.2 openldap-devel
    			3.1.2.1 cyrus-sasl-devel
    	3.2 apr-devel
    
    4. httpd-tools
    	4.1 libapr
    		4.1.1 apr-util
    		4.1.1.1 apr-
    	4.2 libaprutil
    ```

    

13. Packages 폴더 내에서 찾는 방법도 있음

    ```bash
    /mnt/cdrom/packages/ 내부에서 rpm -ivh `tab`키로 해당 패키지 확인 후 버전에 맞는 걸로 확인
    ```




#### 3. Apache 웹 서버 (httpd) 의존성 패키지 설명

1. httpd

   현재 전세계적으로 가장 많이 사용되는 **httpd**로는 apache이며, 이는 Open Source로 제공하기 때문에 **Linux**의 기본 **httpd**입니다. 그 외에 Microsoft사가 만든 IIS가 있습니다.

2. httpd-devel

   httpd 컴파일을 위한 라이브러리, **devel**opment의 줄임말?

3. apr-util-devel

   **a**pache **p**ortable **r**untime-util-devel, 아파치 HTTP 서버 2.x.의 핵심이며 휴대용 라이브러리. 고급 IO 기능(sendfile, epoll and OpenSSL 등)에 대한 접근을 포함하여 OS 수준의 기능(난수 생성, 시스템 생성 등), 기본 프로세스 처리(공유 메모리, NT 파이프와 유닉스 소켓)등 많은 용도로 사용.

4. expat-devel

   expat을 가지고 XML응용 프로그램을 개발하는데 필요한 라이브러리들과 파일들.

5. expat

   XML 파싱하는 라이브러리

   Expat은 XML을 구문 분석하는 C 라이브러리입니다. Expat은 스트림 위주의 XML 구문 분석기(parser) 입니다; 구문 분석을 시작하기 전에 구문 분석기에 처리기(handler)를 등록한 후 구문 분석하는 문서에서 관련된 구조가 발견되면 구문 분석기는 처리기를 불러옵니다. 시작 태그(start tag)는 처리기를 등록할 수 있는 구조의 한 예입니다.

6. openldap-devel

   LDAP(Lightweight Directory Access Protocol) 내부를 사용하는 응용 프로그램을 컴파일하는 데 필요한 개발 라이브러리 및 헤더 파일이 포함.

   [OpenLDAP 공식 사이트]: http://www.openldap.org/

   LDAP이란 프로토콜에 액세스하고 분산 유지하기 위한 디렉토리 정보 서비스를 제공하는 인터넷 프로토콜 네트워크.

   LDAP의 일반적인 용도는 사용자 이름과 비밀번호를 저장하는 중앙 위치를 제공하는 것입니다. 이를 통해 다양한 응용 프로그램과 서비스가 LDAP 서버에 연결하여 사용자를 확인할 수 있습니다.

7. cyrus-sasl-devel

   Cyrus SASL(Simple Authentication and Security Layer) 인증 메커니즘과 응용 프로그램 프로토콜 연결하는 SASL 라이브러리로 응용 프로그램을 개발하고 컴퍼일하는데 필요한 파일이 포함.

   [Cyrus SASL]: https://www.cyrusimap.org/sasl/

8. 



#### 4. yum과 apt-get

- yum은 Redhat 계열만 가능

- apt-get은 debian 계열만 가능



1. 인터넷이 연결 되어야 설치 가능
   1. 인터넷 확인 방법
      1. DNS로 ping 보내보기
      2. port 확인

2. DNS 확인
   1. nslookup
   2. ping [도메인 이름]
   3. netsh
   4. ipconfig

3. yum 패키지 설치 (yum은 위 1,2번이 연결 되어 있어야 다운 가능)

   ```bash
   # yum install [패키지명]
   ```

   최신 버전은 yum으로 설치 할 수 없는 이유는 안정성 측면에서 확인이 된 후 올리기 때문에 (최신버전을 받고자 하면 각 패키지를 만든 회사의 사이트에서 배포된 패키지를 받아와서 직접설치 해야함)

   yum은 원하는 위치와 버전을 선택할 수 없으므로 시스템 엔지니어는 라이브러리 설치시에만 yum을 사용하지 잘 쓰지 않음

4. 



### Reference

[리눅스 cdrom 마운트]: https://linuxconfig.org/how-to-mount-cdrom-in-linux

[의존성 패키지 사이트]: https://centos.pkgs.org/6/centos-x86_64/apr-util-ldap-1.3.9-3.el6_0.1.x86_64.rpm.html

[Red Hat's comps.cml File]: http://penguin.triumf.ca/comps/fc3/
[RPM resoucre 들 설명 사이트]: https://rpmfind.net/linux/RPM/index.html

